import streamlit as st

st.set_page_config(page_title="MBTI 직업 추천", page_icon="🎯", layout="centered")

# ---------------------------
# 데이터: MBTI별 추천 직업과 강점
# ---------------------------
RECOS = {
    "INTJ": {
        "jobs": ["데이터 사이언티스트 💡", "전략기획자 📊", "연구원/학자 🔬"],
        "why": [
            "복잡한 문제를 구조화하고 장기 전략을 세우는 데 강함",
            "독립적으로 깊이 있는 탐구를 선호",
            "시스템/모델링적 사고에 강점"
        ],
    },
    "INTP": {
        "jobs": ["소프트웨어 엔지니어 🧑‍💻", "AI 연구원 🤖", "UX 리서처 🔍"],
        "why": [
            "아이디어 실험과 원리 탐구를 즐김",
            "논리적 분석과 추상화 능력 우수",
            "새로운 개념을 빠르게 이해하고 개선"
        ],
    },
    "ENTJ": {
        "jobs": ["프로덕트 매니저 🗺️", "기업가/창업가 🚀", "경영컨설턴트 🧭"],
        "why": [
            "목표 지향적 리더십과 실행력",
            "복잡한 프로젝트를 조율하고 최적화",
            "의사결정과 전략 수립에 자신감"
        ],
    },
    "ENTP": {
        "jobs": ["스타트업 기획자 💡", "마케팅 전략가 📣", "벤처투자 심사역 💼"],
        "why": [
            "새로운 아이디어를 연결하고 피봇 잘함",
            "설득과 커뮤니케이션에 강점",
            "변화가 많은 환경에서 유연하게 적응"
        ],
    },
    "INFJ": {
        "jobs": ["심리상담사 🧠", "교육 컨설턴트 🎓", "사회정책 연구원 🏛️"],
        "why": [
            "사람의 동기와 의미를 깊이 이해",
            "가치 지향적 문제 해결 선호",
            "개인의 성장과 사회적 임팩트 중시"
        ],
    },
    "INFP": {
        "jobs": ["작가/콘텐츠 크리에이터 ✍️", "사회복지사 🤝", "브랜드 스토리텔러 📖"],
        "why": [
            "공감 능력과 스토리텔링 강점",
            "자기표현과 가치 중심의 일에 몰입",
            "섬세한 관찰과 감성적 표현에 능숙"
        ],
    },
    "ENFJ": {
        "jobs": ["교육자/교사 🍎", "HR/조직개발 🔧", "커뮤니티 매니저 🫶"],
        "why": [
            "타인을 동기부여하고 성장 지원",
            "조직 내 협업과 조율에 뛰어남",
            "비전 제시와 관계 구축 능력 우수"
        ],
    },
    "ENFP": {
        "jobs": ["광고/크리에이티브 디렉터 🎨", "퍼실리테이터/코치 🧩", "콘텐츠 마케터 📱"],
        "why": [
            "아이디어 발산과 사람 연결의 달인",
            "열정과 에너지로 프로젝트에 활력 제공",
            "새로운 가능성을 발견하고 전파"
        ],
    },
    "ISTJ": {
        "jobs": ["공무원/행정직 🗂️", "회계사/재무분석가 🧾", "품질관리 엔지니어 🧰"],
        "why": [
            "체계적이고 신뢰할 수 있는 실행",
            "정확성과 규정 준수에 강점",
            "세부사항을 꼼꼼히 관리"
        ],
    },
    "ISFJ": {
        "jobs": ["간호사/의료보조 🏥", "학생생활지도/행정 🎒", "고객성공 매니저 🤝"],
        "why": [
            "배려심과 책임감이 높음",
            "안정적 환경에서 성실하게 헌신",
            "타인의 필요를 잘 파악"
        ],
    },
    "ESTJ": {
        "jobs": ["프로젝트 매니저 🧱", "운영/오퍼레이션 매니저 ⚙️", "세일즈 매니저 🤝"],
        "why": [
            "목표 달성 중심의 기획/실행",
            "조직과 프로세스를 정비하는 능력",
            "현실적인 의사결정"
        ],
    },
    "ESFJ": {
        "jobs": ["행사/이벤트 플래너 🎉", "HR/채용 코디네이터 🧑‍🤝‍🧑", "서비스 기획자 🧋"],
        "why": [
            "사교성과 팀워크가 강점",
            "고객/구성원의 경험을 세심하게 관리",
            "협력적 분위기 형성"
        ],
    },
    "ISTP": {
        "jobs": ["하드웨어 엔지니어 🔧", "드론/로봇 기술자 🛩️", "응용개발자 🧩"],
        "why": [
            "문제를 손으로 빠르게 해결",
            "도구/기술을 유연하게 다룸",
            "실험적 접근과 트러블슈팅 강함"
        ],
    },
    "ISFP": {
        "jobs": ["그래픽 디자이너 🖼️", "산림/환경관리 🌿", "사진/영상 크리에이터 📷"],
        "why": [
            "감각적 디테일과 미적 감수성",
            "현실 속에서 조용히 가치 실천",
            "유연하고 온화한 협업 스타일"
        ],
    },
    "ESTP": {
        "jobs": ["세일즈/BD 💼", "스포츠/이벤트 운영 🏟️", "응급구조/현장직 🚑"],
        "why": [
            "즉각적 판단과 실행력",
            "대면 소통과 협상에 능숙",
            "변화 많은 현장을 즐김"
        ],
    },
    "ESFP": {
        "jobs": ["엔터테인먼트/MC 🎤", "브랜드 앰버서더 📸", "관광/여행 기획 ✈️"],
        "why": [
            "활기차고 긍정적인 분위기 메이킹",
            "현장 중심의 경험 설계에 강점",
            "사람들과의 즉각적 상호작용 선호"
        ],
    },
}

SIMILAR = {
    "NT(분석가)": ["INTJ", "INTP", "ENTJ", "ENTP"],
    "NF(외교관)": ["INFJ", "INFP", "ENFJ", "ENFP"],
    "SJ(관리자)": ["ISTJ", "ISFJ", "ESTJ", "ESFJ"],
    "SP(모험가)": ["ISTP", "ISFP", "ESTP", "ESFP"],
}

TIPS = {
    "INTJ": "장기 목표를 세우고 역량 역추적(Backcasting) 계획표를 만들어봐요. 📅",
    "INTP": "흥미 주제 하나를 정해 작은 프로토타입을 만들어보세요. 🧪",
    "ENTJ": "동아리/프로젝트에서 OKR을 설정하고 리딩해봐요. 🧭",
    "ENTP": "아이디어 10개를 짧게 피치하고 베스트 1개를 실행! ⚡",
    "INFJ": "의미 있는 프로젝트(멘토링/봉사)를 꾸준히 기록해요. 📝",
    "INFP": "감정/가치를 담은 포트폴리오를 만들어보세요. 🎨",
    "ENFJ": "학급/동아리의 성장 로드맵을 설계해봐요. 🧑‍🏫",
    "ENFP": "사람과 아이디어를 잇는 인터뷰 시리즈를 만들어봐요. 🎤",
    "ISTJ": "자격/공인시험 로드맵과 체크리스트를 만들어요. ✅",
    "ISFJ": "도움이 필요한 주변인을 위한 서비스 아이디어 구체화. 🤗",
    "ESTJ": "행사 하나를 맡아 일정/예산/리소스를 관리해봐요. 📅",
    "ESFJ": "팀의 온보딩 가이드를 만들어 공유해봐요. 📘",
    "ISTP": "고장난 것을 뜯어보고 고치는 메이커 프로젝트! 🔩",
    "ISFP": "사진/영상 30일 챌린지로 감각을 다듬어요. 📸",
    "ESTP": "현장형 업무(봉사/스포츠)에서 리드 역할을 시도! 🏃",
    "ESFP": "이벤트 기획/사회로 에너지와 센스를 보여줘요. 🎊",
}

# ---------------------------
# UI
# ---------------------------
st.title("🎯 MBTI 기반 직업 추천 (고등학생용)")
st.caption("가볍게 참고하는 가이드입니다. 성향은 바뀔 수 있고, 경험을 통해 더 잘 알게 됩니다.")

st.write("**MBTI 유형을 선택하면 해당 성향에 어울리는 직업 3가지를 추천해 드려요.**")

col1, col2 = st.columns([1, 2])
with col1:
    selected = st.selectbox(
        "내 MBTI 유형을 선택하세요",
        options=sorted(list(RECOS.keys())),
        index=sorted(list(RECOS.keys())).index("INFJ") if "INFJ" in RECOS else 0
    )

with col2:
    st.info("💡 *주의*: MBTI는 진로를 '결정'하지 않습니다. 관심사·역량·경험이 더 중요해요!", icon="ℹ️")

st.divider()

if selected:
    block = RECOS[selected]
    st.subheader(f"🔎 {selected} 추천 직업 Top 3")
    for i, job in enumerate(block["jobs"], start=1):
        st.markdown(f"**{i}. {job}**")

    with st.expander("왜 어울릴까요? (강점 해설) 🧠"):
        for w in block["why"]:
            st.markdown(f"- {w}")

    # 맞춤 성장 팁
    st.success(f"📌 성장 팁: {TIPS.get(selected, '호기심을 따라 작은 실험을 꾸준히 해보세요.')}")

    # 비슷한 성향 제안
    st.caption("비슷한 성향 그룹에서 아이디어를 더 찾아보세요:")
    for label, types in SIMILAR.items():
        if selected in types:
            st.write(f"• **{label}** → {', '.join(types)}")

st.divider()

with st.sidebar:
    st.header("🧭 사용 가이드")
    st.write(
        """
        - 결과는 *참고용*이에요. 흥미·가치·능력·환경을 함께 고려하세요.
        - 관심 진로를 정했다면 다음을 해봐요:
            1) 관련 동아리/대회/봉사 찾기
            2) 멘토 인터뷰 3명 진행하기
            3) 간단 포트폴리오 제작(노션, 블로그 등)
        """
    )
    st.header("🧩 성향 그룹")
    for label, types in SIMILAR.items():
        st.write(f"**{label}**: {', '.join(types)}")

st.caption("© 학생 진로 탐색을 돕기 위한 간단 앱 — 이모지와 함께 센스있게 ✨")
